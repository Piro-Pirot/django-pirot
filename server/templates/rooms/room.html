{% extends 'base.html' %}
{% load static %}

{% block content %}

<input type="hidden" class="username" value="{{ user }}">
<input type="hidden" class="userid" value="{{ user.id }}">
<input type="hidden" class="roomtype" value="{{ room_type }}">

<div class="chat-name">{{ title }} 채팅 방</div>
<div class="chat-container">
    <div class="chat-conversation-container">
        <div class="conversation"></div>
        <div class="chat-input">
            <input type="text" class="input" onkeypress="if(event.keyCode==13) {onClickSendMessage('{{ user }}', '{{ room_uuid }}');}">
            <button type="button" onclick="onClickSendMessage('{{ user }}', '{{ room_uuid }}')">SEND</button>
        </div>
    </div>
    <div class="board"></div>
</div>


{% endblock %}

{% block extra %}

<script>
    let jsonBubbles = {{jsonBubbles | safe}};
    
    let bubbleList = [];
    
    jsonBubbles.forEach(element => {
        bubbleList.push(element);
    });

    let curUsername = document.querySelector('.username').value;
    let curUserId = document.querySelector('.userid').value;
    let curRoomType = document.querySelector('.roomtype').value;

    // 말풍선을 담을 곳
    let converations = document.querySelector('.conversation');
</script>

<script src="{% static 'js/chat/bubble.js' %}"></script>
<script src="{% static 'js/chat/socketClient.js' %}"></script>

{% endblock %}